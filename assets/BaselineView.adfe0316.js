import{_ as A,u as D,o as c,c as p,a as s,F as C,r as M,t as T,R as $,P as W,b as S,d as R,e as u,w as E,v as O,f as v,n as L,g as m,h as F,i as j,j as I,p as U,k as Z,s as J,l as K,m as X,q as G,x as Y,y as Q,z as N,A as z,B as q,C as tt,D as et,E as it,G as st,H as at,T as ot,I as lt,J as nt,K as rt,L as dt,M as ht}from"./index.854e376a.js";import{f as ct}from"./defaultLocale.56cd2440.js";const gt={name:"PCV",props:[],data(){return{showTable:0,elHeight:0,all_data:[],elWidth:0,select_video:"",selectData:[],info_data:[]}},methods:{translate(e,t,o){return`translate(${e}, ${t}) rotate(${o})`}},created(){},updated(){},computed:{calcInfoData(){return this.info_data.sort((e,t)=>e.time-t.time),this.info_data.filter(e=>e.status!=3&&e.repeat_status==1&&e.status!=4)}},mounted(){const e=D();this.dataSource=e.categorySource,this.select_video=e.select_video,this.all_data=e.all_data,e.$subscribe((t,o)=>{this.dataSource=o.categorySource,this.select_video=e.select_video,this.all_data=e.all_data})},watch:{select_video:{handler(){console.log(this.select_video),this.selectData=this.all_data[this.select_video],this.info_data=this.selectData.info}}}},pt={class:"frameworkBody"},ft=s("div",{style:{"text-align":"left","font-size":"24px",color:"white","font-weight":"bold",height:"40px"}}," \u53EF\u7528\u6027\u95EE\u9898\u5217\u8868 ",-1),ut={style:{height:"calc(100% - 50px)",width:"100%","overflow-y":"auto","padding-right":"8px","margin-top":"10px"}},_t={class:"problem-card-time"},mt={class:"problem-card-description"};function vt(e,t,o,n,i,l){return c(),p("div",pt,[ft,s("div",ut,[(c(!0),p(C,null,M(l.calcInfoData,(d,h)=>(c(),p("div",{class:"problem-card",key:"problem_card_"+h},[s("div",_t,T(parseInt(d.time/60/60).toString().padStart(2,"0")+":"+parseInt(d.time/60).toString().padStart(2,"0")+":"+(d.time%60).toString().padStart(2,"0")),1),s("div",mt,T(d.description),1)]))),128))])])}const wt=A(gt,[["render",vt]]);const yt={name:"PCV",props:[],data(){return{all_data:[],showPop:!1,dialogVisible:!1,selectShowLevel:1,loadingTag:!1,showDefault:!1,autoShow:!1,user_info:{name:"",gender:"",age:""},config:{src:"",videoHeight:1},pathSetting:"http://43.153.168.84:8080/",defaultShowTag:0,noneDisabledTag:{},select_video:"",main_data:[],showLevelTag:{showFirstTag:!1,showSecondTag:[]},elHeight:0,elWidth:0,playTag:1,currentPlayTime:0,repeatTime:-1,sumTime:0,marker_data:[],marker_time:{},player:{},state:{},progressBar:0,colorMap:["","#F6D962","#D5A138","#EF753A","#F08F70","#EB7D81","#B76E90","#986EA4","#9286B3","#8796BC","#A3BFCE","#B4D3B4","#D1EFFF","#89D1FF","#1B90FF","#0057D2","#002A86","#E2D8FF","#B894FF","#7858FF","#470CED","#1C0C6E","#FFDCF3","#FF8AF0","#F31DED","#A100C2","#510080","#FFDCE8","#FEADC8","#FA4F96","#BA066C","#71014B","#FFD5EA","#FF8CB2","#EE3939","#AA0808","#5A0404","#FFF3B8","#FFC933","#E76500","#A93E00","#6D1900","#EBF5CB","#97DD40","#36A41D","#256F3A","#164323","#C2FCEE","#2CE0BF","#049F9A","#046C7A","#02414C","#EAECEE","#A9B4BE","#5B738B","#354A5F","#1A2733"],dataSource:[],showInfo:!1,info_data:{tag:[]},already_time:{nowTime:-1,timeSlot:[],lastTime:-1},showTagList:[],allTagTimeData:{},preview_config:{},tagConfig:{addPoint:!1,loadingTag:!1,tag_name:"",tag_description:"",add_tag_level:"",selectData:[]},dataSelect:-1,previewTime:-1,timeChangeTag:0,timeBeforeChange:-1,timeChangeType:"jump"}},methods:{clickEdit(){this.showDefault&&(this.showDefault=!1),this.showMarkerDialog(this.info_data);const e=D(),t=Date.now();function o(n){const i=new Date(n),l=(i.getMonth()+1).toString().padStart(2,"0"),d=i.getDate().toString().padStart(2,"0"),h=i.getHours().toString().padStart(2,"0"),_=i.getMinutes().toString().padStart(2,"0"),f=i.getSeconds().toString().padStart(2,"0");return`${l}/${d} ${h}:${_}:${f}`}console.log(o(t),t),e.reuse_list.push({video:this.select_video,time:t,date:o(t),video_time:this.info_data.time})},reviseTag(e,t){e.status=t,this.calcDeleteData.length==0&&(this.showPop=!1)},showAddDialog(e,t){this.tagConfig.tag_name="",this.tagConfig.addPoint=!0,this.tagConfig.selectData=t,e==1?this.tagConfig.add_tag_level="\u4E00":this.tagConfig.add_tag_level="\u4E8C",this.player.pause(),this.timeChangeTag=!this.timeChangeTag,this.timeChangeType="pause",this.playTag=1},addTag(){let e=-1;for(const t of this.dataSource){e=Math.max(e,t.id);for(const o of t.children)e=Math.max(e,o.id)}if(e+=1,this.tagConfig.tag_name,this.tagConfig.add_tag_level=="\u4E00"||this.tagConfig.selectData.id,this.tagConfig.add_tag_level=="\u4E00",this.dataSource,this.all_data,this.tagConfig.loadingTag=!0,this.tagConfig.add_tag_level=="\u4E00"){let t=this.dataSource.length+1;this.info_data.tag.push(t),this.tagConfig.selectData.push({id:e,l_id:t,level:1,label:this.tagConfig.tag_name,description:this.tagConfig.description,disabled:!1,children:[]})}else{let t=this.tagConfig.selectData.children.length+1;this.info_data.second_tag[this.tagConfig.selectData.l_id-1].push(t),this.tagConfig.selectData.children.push({id:e,l_id:1,cnt:t,level:2,label:this.tagConfig.tag_name,description:this.tagConfig.description,disabled:!1,children:[]})}this.tagConfig.addPoint=!1,this.tagConfig.loadingTag=!1},showDialog(e){this.dialogVisible=e},selectPreview(e,t){this.player.pause(),this.timeChangeTag=!this.timeChangeTag,this.timeChangeType="pause",this.playTag=1;const o=e.time,n=t,i=t+" "+parseInt(o/60/60).toString().padStart(2,"0")+":"+parseInt(o/60).toString().padStart(2,"0")+":"+(o%60).toString().padStart(2,"0");this.preview_config={time:o,video_id:n,name:i},this.dialogVisible=!this.dialogVisible},focusTag(e){if(e=="main"){this.showLevelTag.showFirstTag=!this.showLevelTag.showFirstTag;for(let t in this.showLevelTag.showSecondTag)this.showLevelTag.showSecondTag[t]=!1}else{this.showLevelTag.showFirstTag=!1,this.showLevelTag.showSecondTag[e]=!this.showLevelTag.showSecondTag[e];for(let t in this.showLevelTag.showSecondTag)t!=e&&(this.showLevelTag.showSecondTag[t]=!1)}},selectTag(e,t,o,n,i){console.log(e,t,o,n,i);const l=e.indexOf(t),d=i.indexOf(n);l==-1?(e.push(t),i.push(n),typeof o!="number"&&(o.second_tag[t]=[],this.showLevelTag.showSecondTag.push(!1),typeof this.noneDisabledTag[n]>"u"&&(this.noneDisabledTag[n]=0),this.noneDisabledTag[n]++)):(e.splice(l,1),i.splice(d,1),typeof o!="number"&&(this.showLevelTag.showSecondTag.splice(l,1),this.noneDisabledTag[n]--))},clickDecision(e){if(e==9){for(let t in this.info_data.default)this.info_data[t]=this.info_data.default[t];this.info_data.repeat_status=0}else this.info_data.status=e;this.showInfo=!1},chooseTime(e){this.timeBeforeChange=this.currentPlayTime,this.player.currentTime(e),this.timeChangeTag=!this.timeChangeTag},clickBar(e){let t=e.clientX;t-=20;let o=this.$refs.progressBar.offsetWidth,n=Math.floor(this.sumTime*(t/o));this.timeBeforeChange=this.currentPlayTime,this.player.currentTime(n),this.timeChangeTag=!this.timeChangeTag},clickMarker(e,t){this.autoShow=t,this.timeBeforeChange=this.currentPlayTime,this.player.currentTime(e.time),this.timeChangeTag=!this.timeChangeTag,this.playTag&&(this.player.play(),this.playTag=!this.playTag)},showMarkerDialog(e){this.showInfo||(this.showInfo=!this.showInfo),e.repeat_status=1,document.getElementById("dialogDiv")!=null&&this.$nextTick(()=>{this.$refs.dialogDiv.scrollTop=0});let t={showFirstTag:!1,showSecondTag:[]};for(let o in e.tag)t.showSecondTag.push(!1);this.showLevelTag=t,this.info_data=e},showDefaultDialog(e){this.showDefault||(this.showDefault=!this.showDefault),e.vision=1,document.getElementById("defaultDialogDiv")!=null&&this.$nextTick(()=>{this.$refs.defaultDialogDiv.scrollTop=0}),this.info_data=e},AddMarker(e){this.showInfo||(this.showInfo=!this.showInfo),document.getElementById("dialogDiv")!=null&&this.$nextTick(()=>{this.$refs.dialogDiv.scrollTop=0});let t=this.main_data.info.length,o=e/this.sumTime*100,n={id:t+1,percentage:o,status:-1,time:e,description:"",tag:[],second_tag:{},unique_tag:[],user_said:"",reason:"",vision:1,repeat_status:1,humanAdd:1,default:{description:"",tag:[],second_tag:{},unique_tag:[],user_said:"",reason:""}};this.main_data.info.push(n),this.marker_data.push(this.main_data.info[this.main_data.info.length-1]),this.marker_time[e]=this.marker_data[this.marker_data.length-1],this.info_data=this.marker_time[e]},async submitMarker(){this.info_data.status=0},translate(e,t,o){return`translate(${e}, ${t}) rotate(${o})`},handleEvent(e){},handleMounted(e){this.player=e.player,this.state=e.state},playVideo(){this.playTag?(this.player.play(),this.timeChangeTag=!this.timeChangeTag,this.timeChangeType="play",console.log("play")):(this.player.pause(),this.timeChangeTag=!this.timeChangeTag,this.timeChangeType="pause",console.log("pause")),this.playTag=!this.playTag},calcMarker(e,t){let o=new Array,n=new Object;this.user_info={gender:e.gender,age:e.year,name:e.name};for(const l of e.info){let d=l;d.percentage=l.time/this.sumTime*100,o.push(d),n[d.time]=o[o.length-1]}let i={};for(const l of o)for(const d of l.tag){let h=this.dataSource[d-1].id;if(typeof i[h]>"u"&&(i[h]=0),i[h]++,typeof l.second_tag[d]<"u")for(const _ of l.second_tag[d]){let f=this.dataSource[d-1].children[_-1].id;typeof i[f]>"u"&&(i[f]=0),i[f]++}}return this.noneDisabledTag=i,[o,n]},calcAllTag(e){let t={};for(const o in e){const n=o;for(const i of e[o].info)for(const l of i.tag)if(typeof t[this.dataSource[l-1].id]>"u"&&(t[this.dataSource[l-1].id]={}),typeof t[this.dataSource[l-1].id][n]>"u"&&(t[this.dataSource[l-1].id][n]=[]),t[this.dataSource[l-1].id][n].push(i),typeof i.second_tag[l]<"u")for(const d of i.second_tag[l])typeof t[this.dataSource[l-1].children[d-1].id]>"u"&&(t[this.dataSource[l-1].children[d-1].id]={}),typeof t[this.dataSource[l-1].children[d-1].id][n]>"u"&&(t[this.dataSource[l-1].children[d-1].id][n]=[]),t[this.dataSource[l-1].children[d-1].id][n].push(i)}return t}},components:{VideoPlayer:$,PreviewVideoPlayer:W},created(){},computed:{calcMarkerData(){return this.marker_data.filter(e=>e.status!=3&&e.status!=4)},calcHuman(){return this.marker_data.filter(e=>e.repeat_status==1&&e.status!=3&&e.status!=4)},calcDeleteData(){return this.marker_data.filter(e=>e.status==3)}},mounted(){this.elHeight=this.$refs.mainView.offsetHeight,this.elWidth=this.$refs.mainView.offsetWidth,this.elHeight*2>this.elWidth?this.config.videoHeight=this.elWidth/2:this.config.videoHeight=this.elHeight;const e=D();if(this.dataSelect=e.dataSelect,this.all_data=e.all_data,this.dataSource=e.categorySource,this.select_video=e.select_video,this.dataSource.length!=0&&(this.allTagTimeData=this.calcAllTag(this.all_data)),this.main_data=this.all_data[this.select_video],this.showTagList.length==0){let t=[];for(let o in this.dataSource)t.push(this.dataSource[o].id);this.showTagList=t}e.$subscribe((t,o)=>{if(this.dataSelect=e.dataSelect,this.all_data=o.all_data,this.dataSource=o.categorySource,this.showTagList=o.showTagList,this.selectShowLevel=o.selectShowLevel,this.select_video=e.select_video,this.previewTime=e.currentPlayTime,this.showTagList.length==0){let n=[];for(let i in this.dataSource){n.push(this.dataSource[i].id);for(let l in this.dataSource[i].children)n.push(this.dataSource[i].children[l].id)}this.showTagList=n,this.defaultShowTag=1}})},watch:{previewTime:{handler(){const e=D();this.select_video!=""&&(this.config.src=this.pathSetting+"AI_Tool/"+this.select_video+"/video.mp4",this.main_data=this.all_data[this.select_video],this.$nextTick(()=>{this.timeBeforeChange=this.currentPlayTime,this.player.currentTime(e.currentPlayTime),this.timeChangeTag=!this.timeChangeTag,console.log(e.currentPlayTime)}))}},dataSelect:{handler(e,t){this.dataSelect=e}},all_data:{handler(){this.dataSource.length!=0&&(this.allTagTimeData=this.calcAllTag(this.all_data))},deep:!0},select_video:{handler(e,t){this.sumTime=0,this.noneDisabledTag={},this.playTag=1,t!=""&&typeof this.all_data=="object"&&typeof this.all_data[t]<"u"&&(typeof this.all_data[t].already_time>"u"&&(this.all_data[t].already_time=this.already_time),this.all_data[t].already_time=this.already_time),e!=""&&typeof this.all_data=="object"&&typeof this.all_data[t]<"u"&&(typeof this.all_data[e].already_time>"u"&&(this.all_data[e].already_time={nowTime:-1,timeSlot:[],lastTime:-1}),this.already_time=this.all_data[e].already_time);const o=D();this.select_video!=""&&(this.config.src=this.pathSetting+"AI_Tool/"+this.select_video+"/video.mp4",this.main_data=this.all_data[this.select_video],this.$nextTick(()=>{this.timeBeforeChange=this.currentPlayTime,this.player.currentTime(o.currentPlayTime),this.timeChangeTag=!this.timeChangeTag,console.log(o.currentPlayTime)}))}},showTagList:{handler(){}},timeChangeTag:{handler(){const e=D(),t=Date.now();function o(n){const i=new Date(n),l=(i.getMonth()+1).toString().padStart(2,"0"),d=i.getDate().toString().padStart(2,"0"),h=i.getHours().toString().padStart(2,"0"),_=i.getMinutes().toString().padStart(2,"0"),f=i.getSeconds().toString().padStart(2,"0");return`${l}/${d} ${h}:${_}:${f}`}console.log(o(t),t),this.timeChangeType=="jump"&&e.time_list.push({video:this.select_video,time:t,date:o(t),video_time:this.timeBeforeChange,type:"beforeJump"}),e.time_list.push({video:this.select_video,time:t,date:o(t),video_time:this.state.currentTime,type:this.timeChangeType}),this.timeChangeType="jump"}},state:{handler(){if(this.currentPlayTime=parseInt(this.state.currentTime),isNaN(this.state.duration)||(this.sumTime=parseInt(this.state.duration)),this.sumTime!=0&&(this.progressBar=this.currentPlayTime/this.sumTime*100),this.showInfo==!0&&typeof this.marker_time[this.repeatTime+1]<"u"&&(this.showInfo=!1),this.showDefault==!0&&typeof this.marker_time[this.repeatTime+1]<"u"&&(this.showDefault=!1),typeof this.marker_time[this.currentPlayTime]<"u"&&this.repeatTime!=this.currentPlayTime&&this.marker_time[this.currentPlayTime].status!=3&&(this.autoShow==0&&this.marker_time[this.currentPlayTime].vision==0?this.showDefaultDialog(this.marker_time[this.currentPlayTime]):this.autoShow==1?this.showDefaultDialog(this.marker_time[this.currentPlayTime]):this.autoShow==2&&this.showMarkerDialog(this.marker_time[this.currentPlayTime])),this.repeatTime=this.currentPlayTime,this.already_time.nowTime==-1)this.currentPlayTime==1?this.already_time.timeSlot.push([0,1]):this.currentPlayTime>1&&this.already_time.timeSlot.push([this.currentPlayTime,this.currentPlayTime]),this.already_time.lastTime=this.currentPlayTime,this.already_time.nowTime=0;else if(this.already_time.lastTime==this.currentPlayTime-1)this.already_time.lastTime=this.currentPlayTime,this.already_time.timeSlot[this.already_time.nowTime][1]=this.currentPlayTime;else{let e=-1;for(let t in this.already_time.timeSlot)if(this.currentPlayTime>=this.already_time.timeSlot[t][0]&&this.currentPlayTime<=this.already_time.timeSlot[t][1]){e=t;break}e==-1?(this.already_time.timeSlot.push([this.currentPlayTime,this.currentPlayTime]),this.already_time.nowTime=this.already_time.timeSlot.length-1,this.already_time.lastTime=this.currentPlayTime):this.already_time.nowTime=e}},deep:!0},sumTime:{handler(){this.dataSource.length!=0&&([this.marker_data,this.marker_time]=this.calcMarker(this.main_data,this.all_data))}},noneDisabledTag:{handler(){const e=D();e.noneDisabledTag=this.noneDisabledTag},deep:!0}}},xt={class:"frameworkBody"},Tt={style:{height:"30px","text-align":"left","font-size":"24px",color:"white","font-weight":"bold","justify-content":"space-between",display:"flex"}},St=s("span",null,"\u89C6\u9891\u5206\u6790",-1),bt={style:{width:"100%",height:"calc(100% - 30px)","margin-top":"10px"}},kt={key:0},Ct=s("a",{style:{position:"absolute","margin-top":"1px"}},[s("svg",{t:"1708679239889",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1495",width:"30",height:"30"},[s("path",{d:"M536 480v192a16 16 0 0 1-16 16h-16a16 16 0 0 1-16-16V480a16 16 0 0 1 16-16h16a16 16 0 0 1 16 16z m-32-128h16a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16h-16a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16z m8 448c159.056 0 288-128.944 288-288s-128.944-288-288-288-288 128.944-288 288 128.944 288 288 288z m0 48c-185.568 0-336-150.432-336-336s150.432-336 336-336 336 150.432 336 336-150.432 336-336 336z",fill:"#ffffff","p-id":"1496"})])],-1),Dt={style:{fontSize:"16px",lineHeight:1.5,color:"white"}},Lt=s("h3",null,"\u7528\u6237\u63CF\u8FF0",-1),Vt={style:{"margin-bottom":"10px","padding-right":"10px"}},Ft={style:{padding:"5px 0px 10px 0px"}},Mt=s("div",{class:"align-class"},[s("svg",{t:"1707271687917",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4224",width:"15",height:"15"},[s("path",{d:"M209.92 988.16c-15.36 0-30.72-15.36-30.72-30.72s15.36-30.72 30.72-30.72h471.04c153.6 0 281.6-128 281.6-281.6s-128-281.6-281.6-281.6H102.4l220.16 220.16c5.12 5.12 10.24 10.24 10.24 20.48 0 5.12-5.12 15.36-10.24 20.48-5.12 5.12-10.24 10.24-20.48 10.24-5.12 0-15.36-5.12-20.48-10.24L10.24 353.28c-5.12-5.12-10.24-10.24-10.24-20.48 0-5.12 5.12-15.36 10.24-20.48L281.6 40.96c5.12-5.12 10.24-10.24 20.48-10.24 5.12 0 15.36 5.12 20.48 10.24 0 10.24 5.12 15.36 5.12 25.6 0 5.12-5.12 15.36-10.24 20.48L97.28 307.2h583.68a343.04 343.04 0 0 1 0 686.08H209.92z",fill:"#ffffff","p-id":"4225"})]),m(" \xA0 \u521D\u59CB\u4F4D\u7F6E ")],-1),Bt={key:0,class:"align-class"},Pt=s("svg",{t:"1706253575488",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4211",width:"20",height:"20"},[s("path",{d:"M817.088 484.96l-512-323.744C295.232 154.976 282.752 154.592 272.576 160.224 262.336 165.856 256 176.608 256 188.256l0 647.328c0 11.648 6.336 22.4 16.576 28.032 4.8 2.656 10.112 3.968 15.424 3.968 5.952 0 11.904-1.664 17.088-4.928l512-323.616C826.368 533.184 832 522.976 832 512 832 501.024 826.368 490.816 817.088 484.96z",fill:"#ffffff","p-id":"4212"})],-1),zt={key:1,class:"align-class"},At=s("svg",{t:"1706534722560",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4218",width:"20",height:"20"},[s("path",{d:"M304 176h80v672h-80zM712 176h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z","p-id":"4219",fill:"#ffffff"})],-1),Et={key:0,style:{padding:"5px 0px 10px 0px"}},It=s("svg",{t:"1707272509861",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11129",width:"15",height:"15"},[s("path",{d:"M511.6 63.6c-246.9 0-448 201.2-448 448 0 247.3 201.2 448 448 448s448-200.7 448-448c0-246.9-200.7-448-448-448z m259.9 318.5L474.6 699.3c-7 7.3-16.5 12.1-27.4 12.1-10.5 0-20.5-4.7-27.4-12.1L252 520c-7-7.3-11.5-17.8-11.5-29.4 0-23.1 17.5-41.4 38.9-41.4 10.5 0 20.5 4.7 27.4 12.1l140.7 149.9 270-287.8c7-7.3 16.5-12.1 27.4-12.1 21.5 0 38.9 18.3 38.9 41.4-0.8 11.6-5.3 22.1-12.3 29.4z m0 0","p-id":"11130",fill:"#ffffff"})],-1),Ht=s("svg",{t:"1707272411978",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7920",width:"15",height:"15"},[s("path",{d:"M512 64.5C264.85 64.5 64.5 264.85 64.5 512S264.85 959.5 512 959.5 959.5 759.15 959.5 512 759.15 64.5 512 64.5z m235.21 599.09c16.06 13.81 17.89 38.03 4.08 54.09-7.59 8.83-18.31 13.36-29.1 13.36-8.85 0-17.74-3.05-24.98-9.26L512 562.59 326.79 721.78a38.22 38.22 0 0 1-24.98 9.26c-10.79 0-21.52-4.53-29.1-13.36-13.81-16.06-11.98-40.28 4.08-54.09L453.15 512 276.79 360.42c-16.06-13.81-17.89-38.03-4.08-54.09 13.81-16.07 38.01-17.89 54.09-4.1L512 461.42l185.2-159.19c16.08-13.8 40.29-11.96 54.09 4.1 13.81 16.06 11.98 40.28-4.08 54.09L570.85 512.01l176.36 151.58z","p-id":"7921",fill:"white"})],-1),jt={key:1,style:{padding:"5px 0px 10px 0px"}},Wt=s("svg",{t:"1707272509861",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11129",width:"15",height:"15"},[s("path",{d:"M511.6 63.6c-246.9 0-448 201.2-448 448 0 247.3 201.2 448 448 448s448-200.7 448-448c0-246.9-200.7-448-448-448z m259.9 318.5L474.6 699.3c-7 7.3-16.5 12.1-27.4 12.1-10.5 0-20.5-4.7-27.4-12.1L252 520c-7-7.3-11.5-17.8-11.5-29.4 0-23.1 17.5-41.4 38.9-41.4 10.5 0 20.5 4.7 27.4 12.1l140.7 149.9 270-287.8c7-7.3 16.5-12.1 27.4-12.1 21.5 0 38.9 18.3 38.9 41.4-0.8 11.6-5.3 22.1-12.3 29.4z m0 0","p-id":"11130",fill:"#ffffff"})],-1),Nt=s("svg",{t:"1707272411978",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7920",width:"15",height:"15"},[s("path",{d:"M512 64.5C264.85 64.5 64.5 264.85 64.5 512S264.85 959.5 512 959.5 959.5 759.15 959.5 512 759.15 64.5 512 64.5z m235.21 599.09c16.06 13.81 17.89 38.03 4.08 54.09-7.59 8.83-18.31 13.36-29.1 13.36-8.85 0-17.74-3.05-24.98-9.26L512 562.59 326.79 721.78a38.22 38.22 0 0 1-24.98 9.26c-10.79 0-21.52-4.53-29.1-13.36-13.81-16.06-11.98-40.28 4.08-54.09L453.15 512 276.79 360.42c-16.06-13.81-17.89-38.03-4.08-54.09 13.81-16.07 38.01-17.89 54.09-4.1L512 461.42l185.2-159.19c16.08-13.8 40.29-11.96 54.09 4.1 13.81 16.06 11.98 40.28-4.08 54.09L570.85 512.01l176.36 151.58z","p-id":"7921",fill:"white"})],-1),Rt={key:0},$t=s("a",{style:{position:"absolute","margin-top":"1px"}},[s("svg",{t:"1708679239889",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1495",width:"30",height:"30"},[s("path",{d:"M536 480v192a16 16 0 0 1-16 16h-16a16 16 0 0 1-16-16V480a16 16 0 0 1 16-16h16a16 16 0 0 1 16 16z m-32-128h16a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16h-16a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16z m8 448c159.056 0 288-128.944 288-288s-128.944-288-288-288-288 128.944-288 288 128.944 288 288 288z m0 48c-185.568 0-336-150.432-336-336s150.432-336 336-336 336 150.432 336 336-150.432 336-336 336z",fill:"#ffffff","p-id":"1496"})])],-1),Ot={style:{fontSize:"16px",lineHeight:1.5,color:"white"}},Ut=s("h3",null,"\u7528\u6237\u63CF\u8FF0",-1),Zt={style:{"margin-bottom":"10px","padding-right":"10px"}},Jt={style:{"font-size":"18px"}},Kt={style:{padding:"5px 0px 10px 0px"}},Xt=s("div",{class:"align-class"},[s("svg",{t:"1707271687917",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4224",width:"15",height:"15"},[s("path",{d:"M209.92 988.16c-15.36 0-30.72-15.36-30.72-30.72s15.36-30.72 30.72-30.72h471.04c153.6 0 281.6-128 281.6-281.6s-128-281.6-281.6-281.6H102.4l220.16 220.16c5.12 5.12 10.24 10.24 10.24 20.48 0 5.12-5.12 15.36-10.24 20.48-5.12 5.12-10.24 10.24-20.48 10.24-5.12 0-15.36-5.12-20.48-10.24L10.24 353.28c-5.12-5.12-10.24-10.24-10.24-20.48 0-5.12 5.12-15.36 10.24-20.48L281.6 40.96c5.12-5.12 10.24-10.24 20.48-10.24 5.12 0 15.36 5.12 20.48 10.24 0 10.24 5.12 15.36 5.12 25.6 0 5.12-5.12 15.36-10.24 20.48L97.28 307.2h583.68a343.04 343.04 0 0 1 0 686.08H209.92z",fill:"#ffffff","p-id":"4225"})]),m(" \xA0 \u521D\u59CB\u4F4D\u7F6E ")],-1),Gt={key:0,class:"align-class"},Yt=s("svg",{t:"1706253575488",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4211",width:"20",height:"20"},[s("path",{d:"M817.088 484.96l-512-323.744C295.232 154.976 282.752 154.592 272.576 160.224 262.336 165.856 256 176.608 256 188.256l0 647.328c0 11.648 6.336 22.4 16.576 28.032 4.8 2.656 10.112 3.968 15.424 3.968 5.952 0 11.904-1.664 17.088-4.928l512-323.616C826.368 533.184 832 522.976 832 512 832 501.024 826.368 490.816 817.088 484.96z",fill:"#ffffff","p-id":"4212"})],-1),Qt={key:1,class:"align-class"},qt=s("svg",{t:"1706534722560",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4218",width:"20",height:"20"},[s("path",{d:"M304 176h80v672h-80zM712 176h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z","p-id":"4219",fill:"#ffffff"})],-1),te={key:0,style:{padding:"5px 0px 10px 0px"}},ee=s("svg",{t:"1707272509861",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11129",width:"15",height:"15"},[s("path",{d:"M511.6 63.6c-246.9 0-448 201.2-448 448 0 247.3 201.2 448 448 448s448-200.7 448-448c0-246.9-200.7-448-448-448z m259.9 318.5L474.6 699.3c-7 7.3-16.5 12.1-27.4 12.1-10.5 0-20.5-4.7-27.4-12.1L252 520c-7-7.3-11.5-17.8-11.5-29.4 0-23.1 17.5-41.4 38.9-41.4 10.5 0 20.5 4.7 27.4 12.1l140.7 149.9 270-287.8c7-7.3 16.5-12.1 27.4-12.1 21.5 0 38.9 18.3 38.9 41.4-0.8 11.6-5.3 22.1-12.3 29.4z m0 0","p-id":"11130",fill:"#ffffff"})],-1),ie=s("svg",{t:"1707272411978",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7920",width:"15",height:"15"},[s("path",{d:"M512 64.5C264.85 64.5 64.5 264.85 64.5 512S264.85 959.5 512 959.5 959.5 759.15 959.5 512 759.15 64.5 512 64.5z m235.21 599.09c16.06 13.81 17.89 38.03 4.08 54.09-7.59 8.83-18.31 13.36-29.1 13.36-8.85 0-17.74-3.05-24.98-9.26L512 562.59 326.79 721.78a38.22 38.22 0 0 1-24.98 9.26c-10.79 0-21.52-4.53-29.1-13.36-13.81-16.06-11.98-40.28 4.08-54.09L453.15 512 276.79 360.42c-16.06-13.81-17.89-38.03-4.08-54.09 13.81-16.07 38.01-17.89 54.09-4.1L512 461.42l185.2-159.19c16.08-13.8 40.29-11.96 54.09 4.1 13.81 16.06 11.98 40.28-4.08 54.09L570.85 512.01l176.36 151.58z","p-id":"7921",fill:"white"})],-1),se={"element-loading-background":"rgba(122, 122, 122, 1)",style:{width:"100%",height:"160px","margin-top":"-35px"}},ae=s("h3",{style:{color:"white","text-align":"left"}},"\u6807\u7B7E\u540D\u79F0",-1),oe=s("br",null,null,-1),le=s("h3",{style:{color:"white","text-align":"left"}},"\u6807\u7B7E\u5B9A\u4E49",-1),ne={style:{padding:"30px 0px 10px 0px"}},re={id:"mainView",ref:"mainView",class:"align-class",style:{height:"calc(100% - 105px)",width:"100%"}},de={style:{width:"100%",height:"95px","background-color":"rgba(83, 83, 83, 0)"}},he={style:{height:"50px",width:"100%",padding:"0px 0px 0px 0px"},class:"align-class"},ce={style:{height:"0px",width:"100%"},class:"align-class"},ge={id:"progressBar",ref:"progressBar",style:{width:"100%",height:"8px","background-color":"#5d5f67","border-radius":"20px"}},pe=s("div",{id:"playBar",style:{position:"absolute",left:"0px",top:"8px",width:"100%",height:"3px","background-color":"#5d5f67","border-radius":"0px"}},null,-1),fe={style:{width:"100%",position:"absolute",top:"1px"}},ue={style:{width:"250px","font-size":"16px",padding:"10px"}},_e=s("h3",null,"\u95EE\u9898\u63CF\u8FF0:",-1),me={key:0},ve=["onClick"],we={style:{width:"100%",position:"absolute",top:"40px"}},ye={style:{width:"250px","font-size":"16px",padding:"10px"}},xe=s("h3",null,"\u95EE\u9898\u63CF\u8FF0:",-1),Te=["onClick"],Se=s("div",{style:{height:"16px",width:"16px",backgroundColor:"white",borderRadius:"10px",border:"1px solid #777",opacity:1}},null,-1),be=s("div",{style:{"margin-top":"-20px"}},[s("svg",{width:"12",height:"12",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M12.9173 9.58301C12.209 9.58301 11.6673 10.1247 11.6673 10.833C11.6673 11.5413 12.209 12.083 12.9173 12.083C13.6257 12.083 14.1673 11.5413 14.1673 10.833C14.1673 10.1247 13.6257 9.58301 12.9173 9.58301ZM7.08398 9.58301C6.37565 9.58301 5.83398 10.1247 5.83398 10.833C5.83398 11.5413 6.37565 12.083 7.08398 12.083C7.79232 12.083 8.33398 11.5413 8.33398 10.833C8.33398 10.1247 7.79232 9.58301 7.08398 9.58301Z",fill:"black"}),s("path",{d:"M2.5 6.25024C2.5 5.79191 2.875 5.41691 3.33333 5.41691H6.66667L5.45833 2.37524C5.29167 1.95858 5.5 1.45858 5.91667 1.29191C6.33333 1.12524 6.83333 1.33358 7 1.75024L8.45833 5.37524H11.5L12.9583 1.75024C13.125 1.33358 13.625 1.12524 14.0417 1.29191C14.4583 1.45858 14.6667 1.95858 14.5 2.37524L13.3333 5.41691H16.6667C17.125 5.41691 17.5 5.79191 17.5 6.25024V17.9169C17.5 18.3752 17.125 18.7502 16.6667 18.7502H3.33333C2.875 18.7502 2.5 18.3752 2.5 17.9169V6.25024ZM4.16667 7.08358V17.0836H15.8333V7.08358H4.16667ZM20 14.1669V10.0002C20 9.54191 19.625 9.16691 19.1667 9.16691C18.7083 9.16691 18.3333 9.54191 18.3333 10.0002V14.1669C18.3333 14.6252 18.7083 15.0002 19.1667 15.0002C19.625 15.0002 20 14.6252 20 14.1669ZM0.833333 15.0002C1.29167 15.0002 1.66667 14.6252 1.66667 14.1669V10.0002C1.66667 9.54191 1.29167 9.16691 0.833333 9.16691C0.375 9.16691 0 9.54191 0 10.0002V14.1669C0 14.6252 0.375 15.0002 0.833333 15.0002Z",fill:"black"})])],-1),ke=[Se,be],Ce={style:{"justify-content":"space-between",display:"flex",position:"absolute",bottom:"0px",height:"30px",width:"100%"}},De={style:{height:"30px"},class:"align-class"},Le={key:0,t:"1706253575488",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4211",width:"30",height:"30"},Ve=s("path",{d:"M817.088 484.96l-512-323.744C295.232 154.976 282.752 154.592 272.576 160.224 262.336 165.856 256 176.608 256 188.256l0 647.328c0 11.648 6.336 22.4 16.576 28.032 4.8 2.656 10.112 3.968 15.424 3.968 5.952 0 11.904-1.664 17.088-4.928l512-323.616C826.368 533.184 832 522.976 832 512 832 501.024 826.368 490.816 817.088 484.96z",fill:"#ffffff","p-id":"4212"},null,-1),Fe=[Ve],Me={key:1,t:"1706534722560",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4218",width:"30",height:"30"},Be=s("path",{d:"M304 176h80v672h-80zM712 176h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z","p-id":"4219",fill:"#ffffff"},null,-1),Pe=[Be],ze=s("svg",{t:"1706254098018",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5623",width:"25",height:"25"},[s("path",{d:"M483.157333 71.466667A32 32 0 0 1 512 53.333333c253.312 0 458.666667 205.354667 458.666667 458.666667S765.312 970.666667 512 970.666667 53.333333 765.312 53.333333 512c0-188.16 113.28-349.738667 275.2-420.48a32 32 0 1 1 25.6 58.624 394.666667 394.666667 0 1 0 229.632-26.325333l38.570667 48.213333a32 32 0 0 1-50.005333 39.978667l-85.333334-106.666667a32 32 0 0 1-3.84-33.877333z m-42.666666 262.357333a32 32 0 0 1 18.176 28.842667v298.666666a32 32 0 0 1-64 0v-232.106666l-54.656 43.776a32 32 0 0 1-40.021334-50.005334l106.666667-85.333333a32 32 0 0 1 33.877333-3.84zM608 394.666667a42.666667 42.666667 0 0 0-42.666667 42.666666v149.333334a42.666667 42.666667 0 1 0 85.333334 0v-149.333334a42.666667 42.666667 0 0 0-42.666667-42.666666z m-106.666667 42.666666a106.666667 106.666667 0 0 1 213.333334 0v149.333334a106.666667 106.666667 0 0 1-213.333334 0v-149.333334z","p-id":"5624",fill:"white"})],-1),Ae=[ze],Ee=s("svg",{t:"1706253984610",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4390",width:"25",height:"25"},[s("path",{d:"M53.333333 512C53.333333 258.688 258.688 53.333333 512 53.333333a32 32 0 0 1 25.002667 52.010667l-85.333334 106.666667a32 32 0 0 1-50.005333-40.021334l38.528-48.128C256.512 157.568 117.333333 318.549333 117.333333 512A394.666667 394.666667 0 1 0 669.866667 150.186667a32 32 0 0 1 25.6-58.666667A458.752 458.752 0 0 1 970.666667 512c0 253.312-205.354667 458.666667-458.666667 458.666667S53.333333 765.312 53.333333 512z m387.2-178.176a32 32 0 0 1 18.133334 28.842667v298.666666a32 32 0 0 1-64 0v-232.106666l-54.656 43.776a32 32 0 0 1-40.021334-50.005334l106.666667-85.333333a32 32 0 0 1 33.877333-3.84zM608 394.666667a42.666667 42.666667 0 0 0-42.666667 42.666666v149.333334a42.666667 42.666667 0 1 0 85.333334 0v-149.333334a42.666667 42.666667 0 0 0-42.666667-42.666666z m-106.666667 42.666666a106.666667 106.666667 0 0 1 213.333334 0v149.333334a106.666667 106.666667 0 0 1-213.333334 0v-149.333334z","p-id":"4391",fill:"#ffffff"})],-1),Ie=[Ee],He={style:{color:"white"}},je={class:"align-class",style:{height:"30px"}},We=s("svg",{t:"1709351288980",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9658",width:"25",height:"25"},[s("path",{d:"M276.885468 0h470.228952v73.282434h-470.228952zM41.770992 172.091583h940.457903v73.282434H41.770992zM383.02286 298.259506h73.282434v486.656431h-73.282434zM567.694594 298.259506h73.282434v486.656431h-73.282434z","p-id":"9659",fill:"#ffffff"}),s("path",{d:"M775.267088 298.259506l-47.511445 652.457938H296.305313L248.7328 298.259506h-73.282434l50.381673 691.725109a36.641217 36.641217 0 0 0 36.641217 34.015263h499.602994a36.641217 36.641217 0 0 0 36.641217-34.015263l50.07633-691.725109z","p-id":"9660",fill:"#ffffff"})],-1),Ne={key:0,style:{position:"absolute",top:"-5px",right:"-5px","background-color":"red",width:"15px",height:"15px","font-size":"10px",color:"white","border-radius":"100px"}},Re={style:{"max-height":"300px",width:"100%",padding:"0px 0px","overflow-y":"auto"}},$e=s("span",{style:{"font-style":"italic","font-weight":"bold","text-decoration":"underline",color:"rgb(64, 158, 255)"}},"\u65F6\u95F4:",-1),Oe=s("span",{style:{"font-style":"italic","font-weight":"bold","text-decoration":"underline",color:"rgb(64, 158, 255)"}},"\u63CF\u8FF0:",-1),Ue=s("span",{style:{"font-style":"italic","font-weight":"bold","text-decoration":"underline",color:"rgb(64, 158, 255)"}},"\u6807\u7B7E:",-1),Ze={style:{display:"flex",flexWrap:"wrap",backgroundColor:"#45464700",padding:"0px 3px 0px 3px"}},Je={key:0,style:{display:"flex","flex-wrap":"wrap"}},Ke={style:{width:"100%","justify-content":"center",display:"flex","margin-top":"10px"}};function Xe(e,t,o,n,i,l){const d=S("PreviewVideoPlayer"),h=S("el-popover"),_=S("el-input"),f=S("el-button"),y=S("el-dialog"),k=S("video-player"),x=S("el-tooltip"),b=R("loading");return c(),p(C,null,[u(d,{dialogVisible:i.dialogVisible,config:i.preview_config,onShowDialog:l.showDialog},null,8,["dialogVisible","config","onShowDialog"]),s("div",xt,[s("div",Tt,[St,E(s("span",{style:{"font-size":"20px"}},"\u7F16\u53F7: "+T("V"+i.select_video.substr(1))+" \u6027\u522B: "+T(i.user_info.gender)+" \u5E74\u9F84: "+T(i.user_info.age),513),[[O,i.select_video!=""]])]),s("div",bt,[u(y,{modelValue:i.showInfo,"onUpdate:modelValue":t[7]||(t[7]=r=>i.showInfo=r),title:parseInt(i.info_data.time/60/60).toString().padStart(2,"0")+":"+parseInt(i.info_data.time/60).toString().padStart(2,"0")+":"+(i.info_data.time%60).toString().padStart(2,"0"),width:"20%","append-to":"#mainView",modal:!1,class:j("show_info_dialog"),"show-close":!1},{default:v(()=>[E((c(),p("div",{"element-loading-background":"rgba(122, 122, 122, 0.8)",id:"dialogDiv",ref:"dialogDiv",style:L({width:"100%",height:(i.info_data.status!=-1&&i.info_data.status!=3,150+"px"),color:"white",textAlign:"left",overflow:"auto"})},[s("h2",null,[m(" \u95EE\u9898\u63CF\u8FF0 "),i.info_data.user_said!=""?(c(),p("span",kt,[u(h,{placement:"bottom",title:"",width:250,trigger:"click","popper-class":"marker_description"},{reference:v(()=>[Ct]),default:v(()=>[s("div",Dt,[Lt,m(" "+T('"'+i.info_data.user_said+'"')+" ",1)])]),_:1})])):F("",!0)]),s("div",Vt,[u(_,{modelValue:i.info_data.description,"onUpdate:modelValue":t[0]||(t[0]=r=>i.info_data.description=r),autosize:{minRows:3,maxRows:3},type:"textarea",placeholder:"Please input"},null,8,["modelValue"])])],4)),[[b,i.loadingTag]]),s("div",Ft,[u(f,{type:"primary",onClick:t[1]||(t[1]=r=>l.chooseTime(i.info_data.time))},{default:v(()=>[Mt]),_:1}),u(f,{type:"primary",onClick:t[2]||(t[2]=r=>l.playVideo())},{default:v(()=>[i.playTag==1?(c(),p("div",Bt,[Pt,m(" \xA0 \u64AD\u653E\u89C6\u9891 ")])):(c(),p("div",zt,[At,m(" \xA0 \u6682\u505C\u89C6\u9891 ")]))]),_:1})]),i.info_data.status!=-1&&i.info_data.status!=3?(c(),p("div",Et,[u(f,{type:"success",onClick:t[3]||(t[3]=r=>l.clickDecision(1))},{default:v(()=>[It,m("\xA0 \u786E\u8BA4 ")]),_:1}),u(f,{type:"danger",onClick:t[4]||(t[4]=r=>l.clickDecision(typeof i.info_data.humanAdd<"u"?3:9))},{default:v(()=>[Ht,m("\xA0 \u53D6\u6D88 ")]),_:1})])):(c(),p("div",jt,[u(f,{type:"success",onClick:t[5]||(t[5]=r=>l.submitMarker())},{default:v(()=>[Wt,m("\xA0 \u786E\u8BA4 ")]),_:1}),u(f,{type:"danger",onClick:t[6]||(t[6]=r=>l.clickDecision(3))},{default:v(()=>[Nt,m("\xA0 \u53D6\u6D88 ")]),_:1})]))]),_:1},8,["modelValue","title"]),u(y,{modelValue:i.showDefault,"onUpdate:modelValue":t[11]||(t[11]=r=>i.showDefault=r),title:parseInt(i.info_data.time/60/60).toString().padStart(2,"0")+":"+parseInt(i.info_data.time/60).toString().padStart(2,"0")+":"+(i.info_data.time%60).toString().padStart(2,"0"),width:"20%","append-to":"#mainView",modal:!1,class:j("show_info_dialog"),"show-close":!1},{default:v(()=>[E((c(),p("div",{"element-loading-background":"rgba(122, 122, 122, 0.8)",id:"defaultDialogDiv",ref:"defaultDialogDiv",style:L({width:"100%",height:i.info_data.status!=-1&&i.info_data.status!=3?250+"px":150+"px",color:"white",textAlign:"left",overflow:"auto"})},[s("h2",null,[m(" \u95EE\u9898\u63CF\u8FF0 "),i.info_data.default.user_said!=""?(c(),p("span",Rt,[u(h,{placement:"bottom",title:"",width:250,trigger:"click","popper-class":"marker_description"},{reference:v(()=>[$t]),default:v(()=>[s("div",Ot,[Ut,m(" "+T('"'+i.info_data.default.user_said+'"')+" ",1)])]),_:1})])):F("",!0)]),s("div",Zt,[s("div",Jt,T(i.info_data.default.description),1)])],4)),[[b,i.loadingTag]]),s("div",Kt,[u(f,{type:"primary",onClick:t[8]||(t[8]=r=>l.chooseTime(i.info_data.time))},{default:v(()=>[Xt]),_:1}),u(f,{type:"primary",onClick:t[9]||(t[9]=r=>l.playVideo())},{default:v(()=>[i.playTag==1?(c(),p("div",Gt,[Yt,m(" \xA0 \u64AD\u653E\u89C6\u9891 ")])):(c(),p("div",Qt,[qt,m(" \xA0 \u6682\u505C\u89C6\u9891 ")]))]),_:1})]),i.info_data.status!=-1&&i.info_data.status!=3?(c(),p("div",te,[i.info_data.repeat_status==0?(c(),I(f,{key:0,type:"success",onClick:l.clickEdit},{default:v(()=>[ee,m("\xA0 \u590D\u7528 ")]),_:1},8,["onClick"])):F("",!0),u(f,{type:"primary",onClick:t[10]||(t[10]=r=>this.showDefault=!i.showDefault)},{default:v(()=>[ie,m("\xA0 \u5173\u95ED ")]),_:1})])):F("",!0)]),_:1},8,["modelValue","title"]),u(y,{modelValue:i.tagConfig.addPoint,"onUpdate:modelValue":t[16]||(t[16]=r=>i.tagConfig.addPoint=r),title:"\u6DFB\u52A0"+i.tagConfig.add_tag_level+"\u7EA7\u6807\u7B7E",width:"15%","append-to":"#problems_tag",modal:!1,class:j("add_main_dialog")},{default:v(()=>[E((c(),p("div",se,[ae,s("span",null,[u(_,{modelValue:i.tagConfig.tag_name,"onUpdate:modelValue":t[12]||(t[12]=r=>i.tagConfig.tag_name=r),placeholder:"Please input","input-style":{"font-size":"18px"}},null,8,["modelValue"])]),oe,le,s("span",null,[u(_,{modelValue:i.tagConfig.description,"onUpdate:modelValue":t[13]||(t[13]=r=>i.tagConfig.description=r),placeholder:"Please input",autosize:{minRows:3,maxRows:3},type:"textarea"},null,8,["modelValue"])])])),[[b,i.tagConfig.loadingTag]]),s("div",ne,[u(f,{type:"primary",onClick:t[14]||(t[14]=r=>l.addTag())},{default:v(()=>[m("\u786E\u5B9A")]),_:1}),u(f,{onClick:t[15]||(t[15]=r=>i.tagConfig.addPoint=!1)},{default:v(()=>[m("\u53D6\u6D88")]),_:1})])]),_:1},8,["modelValue","title"]),s("div",re,[s("div",null,[u(k,{src:i.config.src,playsinline:"",controls:!1,volume:1,height:1*i.config.videoHeight,"playback-rates":[.7,1,1.5,2],onMounted:l.handleMounted,onReady:t[17]||(t[17]=r=>l.handleEvent(r)),onPlay:t[18]||(t[18]=r=>l.handleEvent(r)),onPause:t[19]||(t[19]=r=>l.handleEvent(r)),onEnded:t[20]||(t[20]=r=>l.handleEvent(r)),onLoadeddata:t[21]||(t[21]=r=>l.handleEvent(r)),onWaiting:t[22]||(t[22]=r=>l.handleEvent(r)),onPlaying:t[23]||(t[23]=r=>l.handleEvent(r)),onCanplay:t[24]||(t[24]=r=>l.handleEvent(r)),onCanplaythrough:t[25]||(t[25]=r=>l.handleEvent(r)),onTimeupdate:t[26]||(t[26]=r=>{var a;return l.handleEvent((a=i.player)==null?void 0:a.currentTime())})},null,8,["src","height","onMounted"])])],512),s("div",de,[s("div",he,[s("div",ce,[s("div",{onClick:t[27]||(t[27]=(...r)=>l.clickBar&&l.clickBar(...r)),style:{width:"100%",height:"50px",cursor:"pointer"},class:"align-class"},[s("div",ge,null,512),s("div",{style:L({position:"absolute",left:"0px",width:i.progressBar+"%",height:"8px",backgroundColor:"#fff",borderRadius:"20px"})},null,4),s("div",{style:L({backgroundColor:"white",border:"1px solid #5d5f67",height:"12px",width:"12px",position:"absolute",borderRadius:"12px",left:"calc("+i.progressBar+"% - 6px)"})},null,4)]),(c(!0),p(C,null,M(l.calcMarkerData,(r,a)=>(c(),p("div",{key:"main_"+a,style:L({backgroundColor:"#5a9cf8",height:"12px",width:"8px",position:"absolute","border-radius":"4px",left:"calc("+r.percentage+"% - 4px)"})},null,4))),128)),pe,(c(!0),p(C,null,M(i.already_time.timeSlot,(r,a)=>(c(),p("div",{key:"time_slot"+a,style:{width:"100%",position:"absolute",left:"0px"}},[s("div",{style:L({position:"absolute",left:"calc( "+r[0]/i.sumTime*100+"% )",top:"8px",width:"calc("+(r[1]-r[0])/i.sumTime*100+"%)",height:"3px",backgroundColor:"#fff",borderRadius:"0px"})},null,4)]))),128))]),s("div",fe,[(c(!0),p(C,null,M(l.calcHuman,(r,a)=>(c(),p("div",{key:"marker"+a,style:L({position:"absolute",left:"calc("+r.percentage+"% - 8px)"})},[u(x,{class:"box-item",effect:"dark",placement:"top"},{content:v(()=>[s("div",ue,[_e,s("div",null,T(r.description),1)])]),default:v(()=>[i.selectShowLevel==1?(c(),p("div",me,[s("div",{style:{position:"absolute",top:0+"px",height:"16px",width:"16px",backgroundColor:"white",borderRadius:"10px",border:"1px solid #777",opacity:1,cursor:"pointer"},onClick:g=>l.clickMarker(r,2)},null,8,ve)])):F("",!0)]),_:2},1024)],4))),128))]),s("div",we,[(c(!0),p(C,null,M(l.calcMarkerData,(r,a)=>(c(),p("div",{key:"marker"+a,style:L({position:"absolute",left:"calc("+r.percentage+"% - 8px)"})},[r.default.description!=""?(c(),I(x,{key:0,class:"box-item",effect:"dark",placement:"top"},{content:v(()=>[s("div",ye,[xe,s("div",null,T(r.default.description),1)])]),default:v(()=>[s("div",{onClick:g=>l.clickMarker(r,1),style:{cursor:"pointer"}},ke,8,Te)]),_:2},1024)):F("",!0)],4))),128))])]),s("div",Ce,[s("div",null,[s("div",De,[s("a",{onClick:t[28]||(t[28]=r=>l.playVideo())},[i.playTag==1?(c(),p("svg",Le,Fe)):(c(),p("svg",Me,Pe))]),m("\xA0\xA0\xA0\xA0\xA0 "),s("a",{onClick:t[29]||(t[29]=r=>l.chooseTime(i.currentPlayTime-10>=0?i.currentPlayTime-10:0))},Ae),m("\xA0 "),s("a",{onClick:t[30]||(t[30]=r=>l.chooseTime(i.currentPlayTime+10<=i.sumTime?i.currentPlayTime+10:i.sumTime))},Ie),m("\xA0\xA0\xA0\xA0\xA0 "),s("div",He,T(parseInt(i.currentPlayTime/60/60).toString().padStart(2,"0")+":"+parseInt(i.currentPlayTime/60).toString().padStart(2,"0")+":"+(i.currentPlayTime%60).toString().padStart(2,"0"))+"\xA0/\xA0"+T(parseInt(i.sumTime/60/60).toString().padStart(2,"0")+":"+parseInt(i.sumTime/60).toString().padStart(2,"0")+":"+(i.sumTime%60).toString().padStart(2,"0")),1)])]),s("div",null,[s("div",je,[u(h,{visible:i.showPop,placement:"top",width:300,trigger:"click"},{reference:v(()=>[s("a",{onClick:t[31]||(t[31]=r=>i.showPop=!i.showPop)},[We,l.calcDeleteData.length>0?(c(),p("div",Ne,T(l.calcDeleteData.length),1)):F("",!0)])]),default:v(()=>[s("div",Re,[(c(!0),p(C,null,M(l.calcDeleteData,(r,a)=>(c(),p("div",{key:"delete_el"+a,style:{"background-color":"rgba(0, 0, 0, .3)",height:"auto","margin-bottom":"10px",padding:"10px",color:"white","font-size":"18px"}},[s("div",null,[$e,m("\xA0"+T(parseInt(r.time/60/60).toString().padStart(2,"0")+":"+parseInt(r.time/60).toString().padStart(2,"0")+":"+(r.time%60).toString().padStart(2,"0")),1)]),s("div",null,[Oe,m("\xA0"+T(r.description),1)]),s("div",null,[Ue,(c(!0),p(C,null,M(r.tag,(g,B)=>(c(),p("div",{key:"type_first_tag"+g,style:{display:"flex","flex-wrap":"wrap"}},[s("div",{class:"align-class",style:L({backgroundColor:i.colorMap[i.dataSource[g-1].id]+"40",padding:"3px 8px 3px 5px","border-radius":"100px",marginRight:"10px",marginTop:"5px","font-size":"15px",justifyContent:"left"})},[s("div",{style:L({backgroundColor:i.colorMap[i.dataSource[g-1].id],width:"15px",height:"15px",margin:"0px 3px 0px 3px",borderRadius:"20px"})},null,4),s("div",null,T(i.dataSource[g-1].label),1),m(" \xA0 ")],4),s("div",Ze,[typeof r.second_tag[g]<"u"&&r.second_tag[g].length>0?(c(),p("div",Je,[(c(!0),p(C,null,M(r.second_tag[g],(w,P)=>(c(),p("div",{key:"type_second_tag"+w,class:"align-class",style:L({backgroundColor:i.colorMap[i.dataSource[g-1].children[w-1].id]+"40",padding:"3px 8px 3px 5px","border-radius":"100px",marginRight:"10px",marginTop:"5px","font-size":"15px"})},[s("div",{style:L({backgroundColor:i.colorMap[i.dataSource[g-1].children[w-1].id],width:"15px",height:"15px",margin:"0px 3px 0px 3px",borderRadius:"0px"})},null,4),s("div",null,T(i.dataSource[g-1].children[w-1].label),1)],4))),128))])):F("",!0)])]))),128))]),s("div",Ke,[u(f,{type:"success",onClick:g=>l.reviseTag(r,0)},{default:v(()=>[m("\u6062\u590D")]),_:2},1032,["onClick"]),u(f,{type:"danger",onClick:g=>l.reviseTag(r,4)},{default:v(()=>[m("\u5220\u9664")]),_:2},1032,["onClick"])])]))),128))])]),_:1},8,["visible"]),m(" \xA0\xA0\xA0\xA0\xA0 "),u(f,{style:{"margin-top":"-8px"},type:"primary",onClick:t[32]||(t[32]=r=>l.AddMarker(i.currentPlayTime))},{default:v(()=>[m(" \u6DFB\u52A0\u53EF\u7528\u6027\u95EE\u9898 ")]),_:1})])])])])])])],64)}const Ge=A(yt,[["render",Xe]]);const Ye={name:"PCV",props:[],components:{PreviewVideoPlayer:W},data(){return{video_cnt:0,select_video:"",elHeight:0,elWidth:0,video_list:[],config:{},category:[],showTagList:[],dialogVisible:!1}},methods:{translate(e,t,o){return`translate(${e}, ${t}) rotate(${o})`},showPreview(e){this.dialogVisible=!0,this.config={time:0,video_id:e,name:e}},showDialog(e){this.dialogVisible=e},scrollToRight(){let e=document.getElementById("video_list").offsetWidth,t=parseInt(e*this.video_list.length/this.elWidth)+1;this.video_cnt<t&&(this.video_cnt+=1,document.getElementById("recommendList").scrollTo({top:0,left:this.video_cnt*(this.elWidth/2),behavior:"smooth"}))},scrollToLeft(){let e=document.getElementById("video_list").offsetWidth;if(this.video_cnt>0){for(this.video_cnt-=1;this.video_cnt*(this.elWidth/2)>=e*(this.video_list.length-2);)this.video_cnt--;this.video_cnt<0&&(this.video_cnt=0),document.getElementById("recommendList").scrollTo({top:0,left:this.video_cnt*(this.elWidth/2),behavior:"smooth"})}},jaccardSimilarity(e,t){const o=this.intersection(e,t).size,n=this.union(e,t).size;return o/n},intersection(e,t){let o=new Set(e.map(JSON.stringify)),n=new Set(t.map(JSON.stringify));return new Set([...n].filter(i=>o.has(i)))},union(e,t){let o=new Set(e.map(JSON.stringify)),n=new Set(t.map(JSON.stringify));return new Set([...o,...n])},calcSimilarity(e){let t=new Array;for(let o in e){let n=new Array;for(let i in e[o].info)n.push(e[o].info[i].tag);o==this.select_video||t.push({id:o,data:n})}return t}},created(){},mounted(){this.elWidth=this.$refs.recommendList.offsetWidth;const e=D();e.$subscribe(t=>{this.select_video=e.select_video,this.category=e.categorySource,this.showTagList=e.showTagList,this.select_video!=""&&(this.video_list=this.calcSimilarity(e.all_data))})},watch:{}},H=e=>(U("data-v-7eb7e83b"),e=e(),Z(),e),Qe={class:"frameworkBody"},qe=H(()=>s("div",{style:{height:"30px","text-align":"left","font-size":"24px",color:"white","font-weight":"bold","justify-content":"space-between",display:"flex"}},[s("span",null,"\u89C6\u9891\u5217\u8868")],-1)),ti={style:{height:"calc(100% - 40px)"}},ei={ref:"recommendList",id:"recommendList",style:{height:"calc(100% - 0px)","margin-top":"10px","overflow-x":"hidden",width:"100%",display:"flex"}},ii={style:{height:"30px","text-align":"left"}},si={style:{height:"calc(100% - 35px)"}},ai=["src"],oi=["onClick"],li=H(()=>s("div",{style:{"background-color":"white","border-radius":"80px",height:"80px"}},[s("svg",{t:"1705932141588",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4359",width:"80",height:"80"},[s("path",{d:"M374.272 333.312v355.328c0 30.208 20.992 40.448 45.568 26.112l288.768-175.104c25.088-15.872 25.088-40.448 0-54.784L419.84 309.76c-7.68-5.12-14.336-6.656-20.992-6.656-14.336-2.56-24.576 9.216-24.576 30.208zM1024 512c0 282.624-229.376 512-512 512S0 794.624 0 512 229.376 0 512 0s512 229.376 512 512z","p-id":"4360",fill:"#8a8a8a"})])],-1)),ni=[li],ri={style:{position:"absolute",top:"calc(50% - 25px)",left:"10px"},t:"1705561614491",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4198",width:"25",height:"50"},di=H(()=>s("path",{fill:"white",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"},null,-1)),hi=[di],ci={style:{position:"absolute",top:"calc(50% - 25px)",right:"10px"},t:"1705561614491",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4198",width:"25",height:"50"},gi=H(()=>s("path",{fill:"white",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1)),pi=[gi];function fi(e,t,o,n,i,l){const d=S("PreviewVideoPlayer");return c(),p(C,null,[u(d,{dialogVisible:i.dialogVisible,config:i.config,onShowDialog:l.showDialog},null,8,["dialogVisible","config","onShowDialog"]),s("div",Qe,[qe,s("div",ti,[s("div",ei,[(c(!0),p(C,null,M(i.video_list,(h,_)=>(c(),p("div",{ref_for:!0,ref:"video_element",key:"video"+_,id:"video_list",style:{border:"0px solid white",height:"100%",color:"white","font-size":"20px",padding:"3px 10px 5px 10px"}},[s("div",ii,[s("div",null,T(h.id[0]=="P"?"V"+h.id.substr(1):h.id),1)]),s("div",si,[s("img",{src:"AI_Tool/"+h.id+"/fig.png",alt:"",style:{height:"100%"}},null,8,ai),s("div",{class:"play_button align-class",onClick:f=>l.showPreview(h.id)},ni,8,oi)])]))),128))],512),s("div",{style:{position:"absolute",top:"calc(0px)",left:"0px",width:"50px",height:"calc(100% - 0px)","background-color":"rgba(0, 0, 0, .7)","border-radius":"0px"},class:"scroll-button",onClick:t[0]||(t[0]=(...h)=>l.scrollToLeft&&l.scrollToLeft(...h))},[(c(),p("svg",ri,hi))]),s("div",{style:{position:"absolute",top:"calc(0px)",right:"0px",width:"50px",height:"calc(100% - 0px)","background-color":"rgba(0, 0, 0, .7)","border-radius":"0px"},class:"scroll-button",onClick:t[1]||(t[1]=(...h)=>l.scrollToRight&&l.scrollToRight(...h))},[(c(),p("svg",ci,pi))])])])],64)}const ui=A(Ye,[["render",fi],["__scopeId","data-v-7eb7e83b"]]);const _i={name:"PCV",props:[],data(){return{elWidth:0,elHeight:0,viewTag:!0,select_video:"",all_data:[],category_data:[],pathSetting:"/",chart_data:[],showTagList:[],selectShowLevel:1,dialogVisible:!1,overviewTag:!1,config:{},colorMap:["","#F6D962","#D5A138","#EF753A","#F08F70","#EB7D81","#B76E90","#986EA4","#9286B3","#8796BC","#A3BFCE","#B4D3B4","#D1EFFF","#89D1FF","#1B90FF","#0057D2","#002A86","#E2D8FF","#B894FF","#7858FF","#470CED","#1C0C6E","#FFDCF3","#FF8AF0","#F31DED","#A100C2","#510080","#FFDCE8","#FEADC8","#FA4F96","#BA066C","#71014B","#FFD5EA","#FF8CB2","#EE3939","#AA0808","#5A0404","#FFF3B8","#FFC933","#E76500","#A93E00","#6D1900","#EBF5CB","#97DD40","#36A41D","#256F3A","#164323","#C2FCEE","#2CE0BF","#049F9A","#046C7A","#02414C","#EAECEE","#A9B4BE","#5B738B","#354A5F","#1A2733"]}},methods:{showDialog(e){this.dialogVisible=e},calcNetwork(e){let t=new Array;if(this.selectShowLevel==1){for(const o in this.all_data)if(this.overviewTag||this.select_video==""||this.select_video==o)for(const n in this.all_data[o].info)for(const i in this.all_data[o].info[n].tag){const l=this.all_data[o].info[n].tag[i]-1;if(this.overviewTag||this.showTagList.indexOf(this.category_data[l].id)!=-1){const d=this.all_data[o].info[n].time,h=o+" "+parseInt(d/60/60).toString().padStart(2,"0")+":"+parseInt(d/60).toString().padStart(2,"0")+":"+(d%60).toString().padStart(2,"0"),_=this.category_data[l].label,f=this.all_data[o].info[n].status;if(f!=3){let y=["#5a9cf8","#00FF7F","#ecb050"];t.push({source:h,source_type:3,source_color:y[f],target:_,target_type:1,target_color:this.colorMap[this.category_data[l].id],type:0,config:{time:d,video_id:o,name:h}}),t.push({source:this.select_video==""||this.overviewTag?"\u6240\u6709\u89C6\u9891":this.select_video,source_type:0,source_color:"#222c44",target:_,target_type:1,target_color:this.colorMap[this.category_data[l].id],type:1,config:{}})}}}}else for(const o in this.all_data)if(this.overviewTag||this.select_video==""||this.select_video==o)for(const n in this.all_data[o].info)for(const i in this.all_data[o].info[n].tag)for(const l in this.all_data[o].info[n].second_tag[this.all_data[o].info[n].tag[i]]){const d=this.all_data[o].info[n].tag[i]-1,h=this.all_data[o].info[n].second_tag[this.all_data[o].info[n].tag[i]][l]-1;if(this.overviewTag||this.showTagList.indexOf(this.category_data[d].children[h].id)!=-1){const _=this.all_data[o].info[n].time,f=o+" "+parseInt(_/60/60).toString().padStart(2,"0")+":"+parseInt(_/60).toString().padStart(2,"0")+":"+(_%60).toString().padStart(2,"0"),y=this.category_data[d].label,k=this.category_data[d].children[h].label,x=this.all_data[o].info[n].status;if(x!=3){let b=["#5a9cf8","#00FF7F","#ecb050"];t.push({source:f,source_type:3,source_color:b[x],target:k,target_type:2,target_color:this.colorMap[this.category_data[d].children[h].id],type:0,config:{time:_,video_id:o,name:f}}),t.push({source:y,source_type:1,source_color:this.colorMap[this.category_data[d].id],target:k,target_type:2,target_color:this.colorMap[this.category_data[d].children[h].id],type:1,config:{}}),t.push({source:this.select_video==""||this.overviewTag?"\u6240\u6709\u89C6\u9891":this.select_video,source_type:0,source_color:"#222c44",target:y,target_type:1,target_color:this.colorMap[this.category_data[d].id],type:2,config:{}})}}}return t},paintNetwork(e){function t(a){return Math.hypot(a.target.x-a.source.x,a.target.y-a.source.y),`
                    M${a.source.x},${a.source.y}
                    L${a.target.x},${a.target.y}
                `}let o=a=>{function g(P,V){P.active||a.alphaTarget(.3).restart(),V.fx=V.x,V.fy=V.y}function B(P,V){V.fx=P.x,V.fy=P.y}function w(P,V){P.active||a.alphaTarget(0),V.fx=null,V.fy=null}return at().on("start",g).on("drag",B).on("end",w)};const n=this.elWidth,i=this.elHeight,l=Array.from(new Set(e.map(a=>a.type)));let d=new Array;for(const a of e)d.push({id:a.source,color:a.source_color,type:a.source_type,config:a.type==0?a.config:{}}),d.push({id:a.target,color:a.target_color,type:a.target_type,config:{}});const h=Array.from(new Set(d.map(JSON.stringify))).map(JSON.parse),_=e.map(a=>Object.create(a)),f=J(h).force("link",K(_).id(a=>a.id)).force("charge",X().strength(-300/1e3*this.elHeight)).force("center",G(n/2,i/2)).force("x",Y()).force("y",Q());N("#all-network").remove();const y=z("#networkSvg").append("g").attr("id","all-network");z("#networkSvg").call(q().scaleExtent([1,10]).on("zoom",k));function k({transform:a}){z("#all-network").attr("transform",a)}y.append("defs").selectAll("marker").data(l).join("marker").attr("id",a=>`arrow-${a}`).attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",-.5).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("fill","red").attr("d","M0,-5L10,0L0,5");const x=y.append("g").attr("fill","none").attr("stroke-width",1.5).selectAll("path").data(_).join("path").attr("stroke",a=>"white"),b=y.append("g").attr("fill","currentColor").attr("stroke-linecap","round").attr("stroke-linejoin","round").selectAll("#nodes").attr("id","nodes").data(h).join("g").on("mouseenter",(a,g)=>{z("#text_node"+g.index).attr("display","flow")}).on("mouseout",(a,g)=>{z("#text_node"+g.index).attr("display",B=>B.type!=0?"none":"flow")}).on("click",(a,g)=>{g.type==3&&(this.dialogVisible=!this.dialogVisible,this.config=g.config)}).call(o(f));b.append("path").attr("stroke","white").attr("stroke-width",1.5).attr("fill",a=>a.color).attr("d",a=>["M-25 -15L-25 15L45 15L45 -15Z","M0,0a10,10 0 1, 0 20,0a10,10 0 1,0 -20,0","M0 -10L0 10L20 10L20 -10Z","M10 -10L5 0L10 10L15 0Z"][a.type]);const r=y.append("g").attr("fill","currentColor").attr("stroke-linecap","round").attr("stroke-linejoin","round").selectAll("#sentence").attr("id","sentence").data(h).join("g").attr("id",(a,g)=>"text_node"+a.index).attr("display",a=>a.type==0?"flex":"none");r.append("text").attr("x",10).attr("y",a=>a.type==0?".3em":"-1em").attr("text-anchor","middle").text(a=>a.id).clone(!0).lower().attr("fill","none").attr("stroke","white").attr("stroke-width",3),f.on("tick",()=>{x.attr("d",t),b.attr("transform",a=>`translate(${a.x-10},${a.y})`),r.attr("transform",a=>`translate(${a.x-10},${a.y})`)})},calcSun(e){let t={name:"all",text:"\u6240\u6709\u89C6\u9891",color:"#222c44",children:[]},o=new Object;if(this.selectShowLevel==1){for(const n in this.all_data)if(this.overviewTag||this.select_video==""||this.select_video==n)for(const i in this.all_data[n].info)for(const l in this.all_data[n].info[i].tag){const d=this.all_data[n].info[i].tag[l]-1;if(this.overviewTag||this.showTagList.indexOf(this.category_data[d].id)!=-1){const h=this.all_data[n].info[i].time,_=n+" "+parseInt(h/60/60).toString().padStart(2,"0")+":"+parseInt(h/60).toString().padStart(2,"0")+":"+(h%60).toString().padStart(2,"0"),f=this.category_data[d].label,y=this.category_data[d].id,k=this.all_data[n].info[i].status;if(k!=3){let x=["#5a9cf8","#00FF7F","#ecb050"];typeof o[y]>"u"&&(o[y]={name:y,text:f,children:[],color:this.colorMap[this.category_data[d].id],type:1}),o[y].children.push({name:_,text:_,value:1,color:x[k],config:{time:h,video_id:n,name:_},type:0})}}}for(const n in o)t.children.push(o[n]);console.log(t)}else{for(const n in this.all_data)if(this.overviewTag||this.select_video==""||this.select_video==n)for(const i in this.all_data[n].info)for(const l in this.all_data[n].info[i].tag)for(const d in this.all_data[n].info[i].second_tag[this.all_data[n].info[i].tag[l]]){const h=this.all_data[n].info[i].tag[l]-1,_=this.all_data[n].info[i].second_tag[this.all_data[n].info[i].tag[l]][d]-1;if(this.overviewTag||this.showTagList.indexOf(this.category_data[h].children[_].id)!=-1){const f=this.all_data[n].info[i].time,y=n+" "+parseInt(f/60/60).toString().padStart(2,"0")+":"+parseInt(f/60).toString().padStart(2,"0")+":"+(f%60).toString().padStart(2,"0"),k=this.category_data[h].label,x=this.category_data[h].id,b=this.category_data[h].children[_].label,r=this.category_data[h].children[_].id,a=this.all_data[n].info[i].status;if(a!=3){let g=["#5a9cf8","#00FF7F","#ecb050"];typeof o[x]>"u"&&(o[x]={name:x,text:k,children:[],color:this.colorMap[this.category_data[h].id],type:1,sub:{}}),typeof o[x].sub[r]>"u"&&(o[x].sub[r]={name:r,text:b,children:[],color:this.colorMap[this.category_data[h].children[_].id],type:2}),o[x].sub[r].children.push({name:y,text:y,value:1,color:g[a],config:{time:f,video_id:n,name:y},type:0})}}}for(let n in o){for(let i in o[n].sub)o[n].children.push(o[n].sub[i]);t.children.push(o[n])}}return t},paintSunBurst(e){console.log(e);const o=(this.elWidth>this.elHeight?this.elHeight:this.elWidth)/2*.95/(this.selectShowLevel+2),n=tt(e).sum(a=>a.value).sort((a,g)=>g.value-a.value),i=et().size([2*Math.PI,n.height+1])(n);i.each(a=>a.current=a),console.log(i,n);const l=it().startAngle(a=>a.x0).endAngle(a=>a.x1).padAngle(a=>Math.min((a.x1-a.x0)/2,.005)).padRadius(o*1.5).innerRadius(a=>a.y0*o).outerRadius(a=>Math.max(a.y0*o,a.y1*o-1));N("#all-network").remove();const d=z("#networkSvg").append("g").attr("id","all-network").attr("transform",`translate(${this.elWidth/2}, ${this.elHeight/2})`);z("#networkSvg").on(".zoom",null);const h=d.append("g").selectAll("path").data(i.descendants()).join("path").attr("fill",a=>a.data.color).attr("fill-opacity",a=>(x(a.current)&&a.children,.6)).attr("pointer-events",a=>x(a.current)?"auto":"none").attr("d",a=>l(a.current));h.filter(a=>a.children).style("cursor","pointer").on("click",k),h.filter(a=>a.children==null).style("cursor","pointer").on("click",(a,g)=>{console.log(g),this.dialogVisible=!this.dialogVisible,this.config=g.data.config});const _=ct(",d");h.append("title").text(a=>`${a.ancestors().map(g=>g.data.name).reverse().join("/")}
${_(a.value)}`);const f=d.append("g").attr("pointer-events","none").attr("text-anchor","middle").style("user-select","none").selectAll("text").data(i.descendants()).join("text").attr("dy","0.35em").attr("fill-opacity",a=>+b(a.current)).attr("transform",a=>r(a.current)).attr("fill","white").text(a=>a.data.text),y=d.append("circle").datum(i).attr("r",o).attr("fill","none").attr("pointer-events","all").on("click",k);function k(a,g){console.log(g),y.datum(g.parent||i),i.each(w=>w.target={x0:Math.max(0,Math.min(1,(w.x0-g.x0)/(g.x1-g.x0)))*2*Math.PI,x1:Math.max(0,Math.min(1,(w.x1-g.x0)/(g.x1-g.x0)))*2*Math.PI,y0:Math.max(0,w.y0-g.depth),y1:Math.max(0,w.y1-g.depth)});const B=d.transition().duration(750);h.transition(B).tween("data",w=>{const P=st(w.current,w.target);return V=>w.current=P(V)}).filter(function(w){return+this.getAttribute("fill-opacity")||x(w.target)}).attr("fill-opacity",w=>(x(w.target)&&w.children,.6)).attr("pointer-events",w=>(x(w.target),"auto")).attrTween("d",w=>()=>l(w.current)),f.filter(function(w){return+this.getAttribute("fill-opacity")||b(w.target)}).transition(B).attr("fill-opacity",w=>(console.log(+b(w.target),b(w.target)),+b(w.target))).attrTween("transform",w=>()=>r(w.current))}function x(a){return a.y1<=3&&a.y0>=1&&a.x1>a.x0}function b(a){return a.y1<=3&&a.y0>=1&&(a.y1-a.y0)*(a.x1-a.x0)>.03}function r(a){const g=(a.x0+a.x1)/2*180/Math.PI,B=(a.y0+a.y1)/2*o;return`rotate(${g-90}) translate(${B},0) rotate(${g<180?0:180})`}}},components:{PreviewVideoPlayer:W},created(){},computed:{},mounted(){this.elHeight=this.$refs.networkView.offsetHeight,this.elWidth=this.$refs.networkView.offsetWidth;const e=D();if(this.all_data=e.all_data,this.category_data=e.categorySource,this.select_video=e.select_video,this.selectShowLevel=e.selectShowLevel,this.showTagList=e.showTagList,this.showTagList.length==0){let t=[];for(let o in this.category_data)t.push(this.category_data[o].id);this.showTagList=t}this.viewTag?(this.chart_data=this.calcNetwork(this.all_data),this.paintNetwork(this.chart_data)):(this.chart_data=this.calcSun(this.all_data),this.paintSunBurst(this.chart_data)),e.$subscribe((t,o)=>{if(this.all_data=o.all_data,this.category_data=o.categorySource,this.select_video=e.select_video,this.selectShowLevel=e.selectShowLevel,this.showTagList=e.showTagList,console.log(this.showTagList,this.showTagList.length),this.showTagList.length==0){let n=[];for(let i in this.category_data)n.push(this.category_data[i].id);this.showTagList=n}this.viewTag?(this.chart_data=this.calcNetwork(this.all_data),this.paintNetwork(this.chart_data)):(this.chart_data=this.calcSun(this.all_data),this.paintSunBurst(this.chart_data))})},watch:{overviewTag:{handler(){this.viewTag?(this.chart_data=this.calcNetwork(this.all_data),this.paintNetwork(this.chart_data)):(this.chart_data=this.calcSun(this.all_data),this.paintSunBurst(this.chart_data))},deep:!0},viewTag:{handler(){this.viewTag?(this.chart_data=this.calcNetwork(this.all_data),this.paintNetwork(this.chart_data)):(this.chart_data=this.calcSun(this.all_data),this.paintSunBurst(this.chart_data))}}}},mi={class:"frameworkBody"},vi={style:{height:"30px","text-align":"left","font-size":"24px",color:"white","font-weight":"bold","justify-content":"space-between",display:"flex"}},wi=s("span",null,"\u603B\u4F53\u5206\u6790",-1),yi={style:{"font-size":"20px"}},xi={style:{width:"100%",height:"calc(100% - 30px)","margin-top":"10px"}},Ti={id:"networkView",ref:"networkView",class:"align-class",style:{height:"calc(100% - 20px)",width:"100%",border:"0px solid white"}},Si=s("svg",{id:"networkSvg",height:"100%",width:"100%"},null,-1),bi=[Si];function ki(e,t,o,n,i,l){const d=S("PreviewVideoPlayer"),h=S("el-button");return c(),p(C,null,[u(d,{dialogVisible:i.dialogVisible,config:i.config,onShowDialog:l.showDialog},null,8,["dialogVisible","config","onShowDialog"]),s("div",mi,[s("div",vi,[wi,s("span",yi,[u(h,{type:"warning",onClick:t[0]||(t[0]=_=>i.viewTag=!i.viewTag)},{default:v(()=>[m(T(i.viewTag==!1?"\u7F51\u7EDC\u56FE":"\u65ED\u65E5\u56FE"),1)]),_:1}),u(h,{type:"success",onClick:t[1]||(t[1]=_=>i.overviewTag=!0)},{default:v(()=>[m(" \u6982\u89C8\u6A21\u5F0F ")]),_:1}),u(h,{type:"primary",onClick:t[2]||(t[2]=_=>i.overviewTag=!1)},{default:v(()=>[m(" \u7B5B\u9009\u6A21\u5F0F ")]),_:1})])]),s("div",xi,[s("div",Ti,bi,512)])])],64)}const Ci=A(_i,[["render",ki]]);const Di={name:"APP",props:["msgH"],data(){return{msg1:"Hello, main!",leftShow:1,video_select:"",dataset_select:"",saveTag:!1,dataset_options:[{label:"Training",value:0},{label:"User Study",value:1}],video_options:[],all_video_options:[{label:"Training",options:[{value:"T1",label:"T1"},{value:"T2",label:"T2"},{value:"T3",label:"T3"}]},{label:"User Study",options:[{value:"P1",label:"V1"},{value:"P2",label:"V2"},{value:"P3",label:"V3"},{value:"P4",label:"V4"},{value:"P5",label:"V5"},{value:"P6",label:"V6"},{value:"P7",label:"V7"},{value:"P8",label:"V8"},{value:"P9",label:"V9"},{value:"P10",label:"V10"}]}]}},methods:{closeFire(){this.fireworks_item.stop(),this.fireworks_item.clear(),this.saveTag=!1},playFireworks(){if(this.fireworks_item==null){const e=document.querySelector(".firework");this.fireworks_item=new ot(e,{autoresize:!0,opacity:.5,acceleration:1.05,friction:.97,gravity:1.5,particles:50,traceLength:3,traceSpeed:10,explosion:5,intensity:30,flickering:50,lineStyle:"round",hue:{min:0,max:360},delay:{min:30,max:60},rocketsPoint:{min:50,max:50},lineWidth:{explosion:{min:1,max:3},trace:{min:1,max:2}},brightness:{min:50,max:80},decay:{min:.015,max:.03},mouse:{click:!1,move:!1,max:1}})}this.fireworks_item.start(),this.saveTag=!0},saveData(){const e=D(),t={videolist:e.video_list,category:e.categorySource,info:e.all_data,reuse_list:e.reuse_list,changeTag_list:e.changeTag_list,time_list:e.time_list,type:"baseline"};console.log(t.videolist);const o=e.saveData(t);console.log(o),this.playFireworks()},switchView(){const e=D();this.leftShow=!this.leftShow,e.leftShow=this.leftShow},reload(){location.reload()}},created(){},mounted(){let e=D();e.$subscribe(()=>{this.leftShow=e.leftShow})},watch:{dataset_select:{handler(){this.video_options=this.all_video_options[this.dataset_select].options;const e=D();e.dataSelect=this.dataset_select,this.video_select="",e.select_video=this.video_select,this.dataset_select==1?(e.categorySource=lt,e.all_data=nt):(e.categorySource=rt,e.all_data=dt)}},video_select:{handler(){const e=D();e.select_video=this.video_select,e.currentPlayTime=0,console.log(this.video_select);const t=Date.now();function o(n){const i=new Date(n),l=(i.getMonth()+1).toString().padStart(2,"0"),d=i.getDate().toString().padStart(2,"0"),h=i.getHours().toString().padStart(2,"0"),_=i.getMinutes().toString().padStart(2,"0"),f=i.getSeconds().toString().padStart(2,"0");return`${l}/${d} ${h}:${_}:${f}`}console.log(o(t),t),e.video_list.push({video:this.video_select,time:t,date:o(t),video_time:e.currentPlayTime})}}},components:{ControlList:wt,RecommendList:ui,MainView:Ge,NetworkView:Ci}},Li={style:{width:"100%",height:"100%"}},Vi={style:{position:"absolute",top:"calc(50% - 250px)",left:"calc(50% - 256px)"}},Fi=ht('<h1 style="font-family:STKaiti;">\u4FDD\u5B58\u6210\u529F</h1><div style="font-size:25px;font-family:STKaiti;">\u611F\u8C22\u60A8\u53C2\u52A0\u7528\u6237\u5B9E\u9A8C\uFF01</div><div style="font-size:25px;font-family:STKaiti;">\u795D\u60A8\u6709\u7F8E\u597D\u7684\u4E00\u5929\uFF01</div><h1 style="font-family:STKaiti;">Save Successful</h1><div style="font-size:25px;font-family:STKaiti, sans-serif;">Thank you for participating in the User Study!</div><div style="font-size:25px;font-family:STKaiti;">Have a nice day!</div>',6),Mi={id:"navBar"},Bi={style:{"font-weight":"800","padding-left":"10px",position:"absolute"}},Pi={id:"version"},zi={id:"version",style:{"font-size":"16px","font-style":"italic"}},Ai={style:{position:"absolute",right:"10px",top:"0px",display:"flex"}},Ei=s("span",{style:{"font-size":"20px"}},"\u6570\u636E\u96C6",-1),Ii=s("span",{style:{"font-size":"20px"}},"\u89C6\u9891",-1),Hi=s("svg",{t:"1709028086913",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4219",width:"20",height:"20"},[s("path",{d:"M708.388571 121.904762L902.095238 320.804571V828.952381a73.142857 73.142857 0 0 1-73.142857 73.142857H195.047619a73.142857 73.142857 0 0 1-73.142857-73.142857V195.047619a73.142857 73.142857 0 0 1 73.142857-73.142857h513.340952zM292.571429 195.023238L195.047619 195.047619v633.904762l97.52381-0.024381V536.380952h438.857142v292.547048L828.952381 828.952381V350.549333l-97.52381-100.156952V365.714286H292.571429V195.023238zM658.285714 609.52381H365.714286v219.40419h292.571428V609.52381z m-48.761904 73.142857v73.142857h-195.04762v-73.142857h195.04762z m48.761904-487.619048H365.714286v97.52381h292.571428V195.047619z","p-id":"4220",fill:"#ffffff"})],-1),ji=s("svg",{t:"1709092783037",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1464",width:"20",height:"20"},[s("path",{d:"M691.2 307.2h-110.08l81.92-53.76c12.8-7.68 15.36-23.04 7.68-35.84-7.68-12.8-23.04-15.36-35.84-7.68L488.96 307.2l-7.68 5.12c-7.68 5.12-10.24 12.8-10.24 20.48s5.12 15.36 10.24 20.48l153.6 102.4c5.12 5.12 7.68 5.12 12.8 5.12 7.68 0 15.36-5.12 20.48-10.24 7.68-12.8 5.12-28.16-7.68-35.84L578.56 358.4H691.2c112.64 0 204.8 92.16 204.8 204.8s-92.16 204.8-204.8 204.8H332.8c-112.64 0-204.8-92.16-204.8-204.8s92.16-204.8 204.8-204.8h58.88c15.36 0 25.6-10.24 25.6-25.6s-10.24-25.6-25.6-25.6H332.8C192 307.2 76.8 422.4 76.8 563.2s115.2 256 256 256h358.4c140.8 0 256-115.2 256-256s-115.2-256-256-256z",fill:"#ffffff","p-id":"1465"})],-1),Wi={style:{height:"calc(100vh - 40px)",width:"calc(100% - 0px)"}},Ni={key:0,class:"framework",id:"videoView",style:{position:"absolute",left:"calc(10px)",top:"calc(5px)",height:"calc(75%)",width:"calc(70vw - 0px)"}},Ri={class:"framework",id:"controlView",style:{position:"absolute",right:"calc(10px)",top:"calc(5px)",height:"calc(100% - 10px)",width:"calc(30vw - 30px)"}},$i={key:1,class:"framework",id:"recommendView",style:{position:"absolute",left:"calc(10px)",bottom:"calc(5px)",height:"calc(25% - 20px)",width:"calc(70vw)"}},Oi={key:2,class:"framework",id:"networkView",style:{position:"absolute",left:"calc(10px)",top:"calc(5px)",height:"calc(100% - 10px)",width:"calc(70vw - 0px)"}};function Ui(e,t,o,n,i,l){const d=S("el-button"),h=S("router-link"),_=S("el-option"),f=S("el-select"),y=S("MainView"),k=S("ControlList"),x=S("RecommendList"),b=S("NetworkView");return c(),p("div",Li,[s("div",{class:"firework",style:L({position:"absolute",zIndex:100,height:"calc(100% - 9px)",width:"100%",pointerEvents:i.saveTag==!0?"auto":"none",color:"white",backgroundColor:"rgba(0, 0, 0, .7)",transition:"1s",opacity:i.saveTag==!0?1:0})},[s("div",Vi,[Fi,u(d,{style:{"margin-top":"20px","z-index":"1000"},type:"primary",onClick:t[0]||(t[0]=r=>l.closeFire())},{default:v(()=>[m("\u786E\u8BA4")]),_:1})])],4),s("div",Mi,[s("span",Bi,[m(" UX Analysis Tool "),s("span",Pi,[s("a",zi,[u(h,{to:"/"},{default:v(()=>[m("Baseline Version")]),_:1})])])]),s("span",Ai,[s("span",null,[Ei,m("\xA0 "),u(f,{modelValue:i.dataset_select,"onUpdate:modelValue":t[1]||(t[1]=r=>i.dataset_select=r),class:"m-2",placeholder:"Select",style:{width:"120px"},teleported:!1},{default:v(()=>[(c(!0),p(C,null,M(i.dataset_options,r=>(c(),I(_,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),m(" \xA0\xA0 "),s("span",null,[Ii,m("\xA0 "),u(f,{modelValue:i.video_select,"onUpdate:modelValue":t[2]||(t[2]=r=>i.video_select=r),class:"m-2",placeholder:"Select",style:{width:"100px"},teleported:!1},{default:v(()=>[(c(!0),p(C,null,M(i.video_options,r=>(c(),I(_,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),m(" \xA0 | \xA0 "),s("span",null,[u(d,{type:"primary",onClick:t[3]||(t[3]=r=>l.saveData())},{default:v(()=>[Hi,m(" \xA0 \u4FDD\u5B58 ")]),_:1})]),m(" \xA0 | \xA0 "),s("span",null,[u(d,{type:"primary",onClick:t[4]||(t[4]=r=>l.reload())},{default:v(()=>[ji,m(" \xA0 \u91CD\u7F6E ")]),_:1})])])]),s("div",Wi,[i.leftShow==1?(c(),p("div",Ni,[u(y)])):F("",!0),s("div",Ri,[u(k)]),i.leftShow==1?(c(),p("div",$i,[u(x)])):F("",!0),i.leftShow==0?(c(),p("div",Oi,[u(b)])):F("",!0)])])}const Zi=A(Di,[["render",Ui]]);const Ji={name:"home_view",data(){return{msgH:null}},computed:{initSign(){return 1},loadingText(){return"Loading"}},mounted(){this.msgH=1},methods:{fetchData(){}},components:{Main:Zi}},Ki=["element-loading-text"];function Xi(e,t,o,n,i,l){const d=S("Main"),h=R("loading");return E((c(),p("div",{class:"common-layout",style:{width:"100%",height:"100vh","background-color":"#121826"},"element-loading-text":l.loadingText,"element-loading-background":"rgba(0, 0, 0, 0.8)"},[u(d,{msgH:i.msgH},null,8,["msgH"])],8,Ki)),[[h,!l.initSign]])}const Qi=A(Ji,[["render",Xi],["__scopeId","data-v-726ee00b"]]);export{Qi as default};
